# 四柱排盘微信小程序

基于Taro框架开发的四柱排盘微信小程序，支持公历和农历输入，提供专业的命理排盘功能。

## 🎯 功能特性

### ✅ 已实现功能
- **四柱计算**：精确计算年柱、月柱、日柱、时柱
- **双历法支持**：支持公历和农历输入
- **纳音计算**：显示每柱对应的纳音五行
- **十二生旺**：计算并显示生旺状态
- **节气信息**：显示当前和下个节气
- **六十甲子验证**：确保天干地支组合的正确性
- **手动四柱选择**：支持手动选择天干地支
- **分享功能**：支持微信小程序分享

### 🔧 核心工具函数
- `sizhu.ts` - 四柱计算核心算法
- `lunarCalendar.ts` - 农历转换算法
- `jieqi.ts` - 节气计算
- `nayin.ts` - 纳音五行计算
- `shengwang.ts` - 十二生旺计算

## 📱 界面功能

### 输入界面
- 命主姓名输入
- 性别选择（男/女）
- 历法选择（公历/农历）
- 出生时间选择
- 手动四柱选择

### 结果显示
- 四柱展示（年月日时）
- 纳音五行显示
- 十二生旺状态
- 农历信息显示
- 节气信息显示

## 🛠 技术栈

- **框架**：Taro 3.6.25
- **前端**：React + TypeScript
- **样式**：SCSS
- **构建**：Webpack 5
- **目标平台**：微信小程序

## 📦 项目结构

```
sizhu-miniprogram/
├── src/
│   ├── app.tsx              # 应用入口
│   ├── app.config.ts        # 应用配置
│   ├── app.scss            # 全局样式
│   ├── pages/              # 页面目录
│   │   └── index/          # 主页面
│   │       ├── index.tsx   # 页面组件
│   │       ├── index.scss  # 页面样式
│   │       └── index.config.ts # 页面配置
│   └── utils/              # 工具函数
│       ├── sizhu.ts        # 四柱计算
│       ├── lunarCalendar.ts # 农历转换
│       ├── jieqi.ts        # 节气计算
│       ├── nayin.ts        # 纳音计算
│       └── shengwang.ts    # 十二生旺
├── config/                 # 构建配置
├── dist/                   # 构建输出
└── package.json           # 项目配置
```

## 🚀 开发指南

### 安装依赖
```bash
npm install
```

### 开发模式
```bash
npm run dev:weapp
```

### 构建生产版本
```bash
npm run build:weapp
```

### 在微信开发者工具中预览
1. 打开微信开发者工具
2. 导入项目，选择 `dist` 目录
3. 设置AppID（测试可以使用测试号）

## 📋 使用说明

### 基本使用流程
1. **输入基本信息**
   - 填写命主姓名
   - 选择性别
   
2. **选择历法和时间**
   - 公历：直接选择日期和时间
   - 农历：输入年月日时分，可选择闰月
   
3. **开始排盘**
   - 点击"开始排盘"按钮
   - 查看四柱结果
   
4. **手动调整（可选）**
   - 点击"手动选择四柱"
   - 按六十甲子规则选择天干地支
   - 确认后查看结果

### 六十甲子规则
- 天干：甲乙丙丁戊己庚辛壬癸（10个）
- 地支：子丑寅卯辰巳午未申酉戌亥（12个）
- 组合：按固定顺序组合，共60种组合
- 无效组合会自动置灰，无法选择

## 🎨 界面特色

### 设计风格
- **传统色彩**：采用古典金色主题
- **简洁布局**：卡片式设计，层次分明
- **响应式**：适配不同屏幕尺寸
- **交互友好**：清晰的状态反馈

### 用户体验
- **输入验证**：实时验证输入的有效性
- **错误提示**：友好的错误信息提示
- **结果展示**：直观的四柱结果显示
- **分享功能**：支持微信分享

## 🔍 核心算法

### 四柱计算
- 基于精确的天文算法
- 考虑节气对月柱的影响
- 支持1801-2099年范围

### 农历转换
- 高精度农历转换算法
- 支持闰月处理
- 准确的节气计算

### 纳音五行
- 完整的六十甲子纳音表
- 自动匹配对应五行属性

## 📝 开发注意事项

### 构建问题
- 如遇到构建错误，检查Node.js版本（推荐14+）
- 确保所有依赖正确安装
- 清理缓存：`rm -rf node_modules && npm install`

### 微信小程序限制
- 文件大小限制：单个包不超过2MB
- API限制：使用Taro提供的跨平台API
- 样式限制：部分CSS属性不支持

### 性能优化
- 按需加载组件
- 图片资源优化
- 减少不必要的重渲染

## 🤝 贡献指南

欢迎提交Issue和Pull Request来改进项目！

### 开发流程
1. Fork项目
2. 创建功能分支
3. 提交更改
4. 发起Pull Request

## 📄 许可证

MIT License

## 🙏 致谢

感谢所有为中华传统文化传承做出贡献的开发者们！
